!function(){"use strict";var e=function(){const e=document.querySelectorAll(".courses__circle-semicircle"),t=document.querySelector(".courses__timer-seconds"),a=Date.now()+6e4,n=setInterval((function(){const o=Date.now(),s=a-o,u=s/6e4*360;u>180?(e[2].style.display="none",e[0].style.transform="rotate(180deg)",e[1].style.transform=`rotate(${u}deg)`):(e[2].style.display="block",e[0].style.transform=`rotate(${u}deg)`,e[1].style.transform=`rotate(${u}deg)`);const c=Math.floor(s/1e3%60);t.innerText=c;const l=document.querySelector(".courses__last-update"),r=document.querySelector(".courses__exchange-get span");s<=0&&(clearInterval(n),t.innerText="0",l.classList.add("reload"),r.classList.add("reload"),setTimeout((()=>{l.classList.remove("reload"),r.classList.remove("reload")}),500))}))},t=function(){const e=document.querySelector(".courses__last-update"),t=(new Date).toLocaleString("ru",{month:"short"}),a=u((new Date).getUTCDate()),n=u((new Date).getUTCFullYear()),o=u((new Date).getUTCHours()),s=u((new Date).getUTCMinutes());function u(e){return e<10?"0"+e:e}e.innerText="Получаем данные ...",e.innerText=`Последнее обновление ${a} ${t} ${n}, ${o}:${s} UTC`};(function(){const e=document.querySelector("#select-give"),t=document.querySelector("#select-get"),a=document.querySelector(".courses__change-btn"),n=document.querySelector(".get"),o=document.querySelector(".give"),s=document.querySelector(".courses__form");let u=document.querySelector("#input"),c=document.querySelector("#result"),l=document.querySelectorAll(".change-value");!async function(){const r=await fetch("https://www.cbr-xml-daily.ru/daily_json.js"),i=await r.json(),d=await i,v=d.Valute;for(const e in v){let a=`<option value="${e}">${e}</option>`;t.insertAdjacentHTML("beforeend",a)}function p(e){for(const t in v)if(t==e.value){let e=document.querySelector(".courses__currency-icon"),a=document.querySelector(".courses__get source"),n=v[t].CharCode;e.src=`./img/icons/${n.toLowerCase()}.png`,a.srcset=`./img/icons/${n.toLowerCase()}.webp`}}function g(){const a=document.querySelector(".courses__exchange-rates");a.innerText="Получаем данные ...";let n=d.Valute[t.value].Value,o=d.Valute[t.value].Previous,s=d.Valute[t.value].Name,u=parseFloat((1/n).toFixed(2));"GBP"==t.value&&(s="Фунт стерлингов"),a.innerHTML=`<p class="courses__exchange-give" data-value="${e.value}"><span>1</span> Российский рубль равен</p><p class="courses__exchange-get" data-value="${t.value}"><span>${u}</span> ${s}</p>`;const c=document.querySelector(".courses__exchange-get span");n>o?(c.classList.add("down"),c.classList.remove("up")):(c.classList.add("up"),c.classList.remove("down"))}function m(){const a=document.querySelector(".courses__exchange-rates");a.innerText="Получаем данные ...";let n=d.Valute[t.value].Value,o=d.Valute[t.value].Previous,s=d.Valute[t.value].Name,u=parseFloat((1*n).toFixed(2));"GBP"==t.value&&(s="Фунт стерлингов"),a.innerHTML=`<p class="courses__exchange-give" data-value="${t.value}"><span>1</span> ${s} равен</p><p class="courses__exchange-get" data-value="${e.value}"><span>${u}</span> Российским рублям</p>`;const c=document.querySelector(".courses__exchange-get span");n>o?(c.classList.add("up"),c.classList.remove("down")):(c.classList.add("down"),c.classList.remove("up"))}function _(){0==u.value?c.value="":c.value=parseFloat(u.value/d.Valute[t.value].Value).toFixed(2)}function y(){0==c.value?u.value="":u.value=parseFloat(c.value*d.Valute[t.value].Value).toFixed(2)}function h(){let e=document.querySelector(".courses__exchange-give span"),t=document.querySelector(".courses__exchange-get span");0==u.value?g():(e.textContent=u.value.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "),t.textContent=c.value.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "))}function f(){let e=document.querySelector(".courses__exchange-give span"),t=document.querySelector(".courses__exchange-get span");0==c.value?m():(e.textContent=c.value.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "),t.textContent=u.value.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "))}t.addEventListener("change",(e=>{p(e.target)})),window.onload=g,t.value="USD",s.classList.add("no-change"),p(t),g(),u.value=1,u.removeAttribute("readonly"),c.value=parseFloat(u.value/d.Valute[t.value].Value).toFixed(2),c.setAttribute("readonly",""),t.onchange=g,t.oninput=_,u.oninput=_,u.addEventListener("input",h),c.oninput=_,c.addEventListener("input",f),t.addEventListener("change",(function(){h()})),a.onclick=function(e){e.preventDefault(),s.classList.contains("no-change")?(n.appendChild(l[0]),o.appendChild(l[1]),s.classList.remove("no-change"),s.classList.add("change"),m(),c.value=1,c.removeAttribute("readonly"),u.value=parseFloat(c.value*d.Valute[t.value].Value).toFixed(2),u.setAttribute("readonly",""),t.onchange=m,t.oninput=y,c.focus(),c.oninput=y,u.oninput=y,t.addEventListener("change",(function(){f()}))):(o.appendChild(l[0]),n.appendChild(l[1]),s.classList.add("no-change"),s.classList.remove("change"),g(),u.value=1,u.removeAttribute("readonly"),c.value=parseFloat(u.value/d.Valute[t.value].Value).toFixed(2),c.setAttribute("readonly",""),t.onchange=g,t.oninput=_,u.focus(),u.oninput=_,c.oninput=_,t.addEventListener("change",(function(){h()})))}}()})(),e(),t(),setInterval((()=>{e(),t()}),6e4)}();