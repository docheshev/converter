!function(){"use strict";var e=function(){const e=document.querySelectorAll(".exchange__circle-semicircle"),t=document.querySelector(".exchange__timer-seconds"),n=Date.now()+6e4;o();const a=setInterval(o);function o(){const o=Date.now(),c=n-o,u=c/6e4*360;u>180?(e[2].style.display="none",e[0].style.transform="rotate(180deg)",e[1].style.transform=`rotate(${u}deg)`):(e[2].style.display="block",e[0].style.transform=`rotate(${u}deg)`,e[1].style.transform=`rotate(${u}deg)`);const l=Math.floor(c/1e3%60);t.innerText=l,c<=0&&(clearInterval(a),t.innerText="0")}},t=function(){const e=document.querySelector(".exchange__last-update"),t=(new Date).toLocaleString("ru",{month:"short"}),n=u((new Date).getDay()),a=u((new Date).getFullYear()),o=u((new Date).getHours()),c=u((new Date).getMinutes());function u(e){return e<10?"0"+e:e}e.innerText="Получаем данные ...",e.innerText="Последнее обновление "+n+" "+t+" "+a+", "+o+":"+c};(function(){const e=document.querySelector("#select-give"),t=document.querySelector("#select-get"),n=document.querySelector(".courses__change"),a=document.querySelector(".get"),o=document.querySelector(".give"),c=document.querySelector(".courses__form");let u=document.querySelector("#input"),l=document.querySelector("#result"),s=document.querySelectorAll(".cour");!async function(){const r=await fetch("https://www.cbr-xml-daily.ru/daily_json.js"),i=await r.json(),d=await i,v=d.Valute;for(const e in v){let n=`<option value="${e}">${e}</option>`;t.insertAdjacentHTML("beforeend",n)}function g(e){for(const t in v)if(t==e.value){let e=document.querySelector(".courses__currency-icon"),n=document.querySelector(".courses__get source"),a=v[t].CharCode;e.src=`./img/icons/${a.toLowerCase()}.png`,n.srcset=`./img/icons/${a.toLowerCase()}.png`}}function m(){const n=document.querySelector(".exchange__rates");n.innerText="Получаем данные ...";let a=d.Valute[t.value].Value,o=d.Valute[t.value].Previous,c=parseFloat((1/a).toFixed(2));n.innerHTML=`<p class="exchange__item-give" data-value="${e.value}">1 ${e.value}</p><p class="exchange__item-get" data-value="${t.value}">${c} ${t.value}</p>`;const u=document.querySelector(".exchange__item-get");a>o?(u.classList.add("down"),u.classList.remove("up")):(u.classList.add("up"),u.classList.remove("down"))}function p(){const n=document.querySelector(".exchange__rates");n.innerText="Получаем данные ...";let a=d.Valute[t.value].Value,o=d.Valute[t.value].Previous,c=parseFloat((1*a).toFixed(2));n.innerHTML=`<p class="exchange__item-give" data-value="${t.value}">1 ${t.value}</p><p class="exchange__item-get" data-value="${e.value}">${c} ${e.value}</p>`;const u=document.querySelector(".exchange__item-get");a>o?(u.classList.add("up"),u.classList.remove("down")):(u.classList.add("down"),u.classList.remove("up"))}function _(){0==u.value?l.value="":l.value=parseFloat(u.value/d.Valute[t.value].Value).toFixed(2)}function h(){0==l.value?u.value="":u.value=parseFloat(l.value*d.Valute[t.value].Value).toFixed(2)}t.addEventListener("change",(e=>{g(e.target)})),window.onload=m,t.value="USD",g(t),t.onchange=m,u.oninput=_,t.oninput=_,c.classList.add("no-change"),n.addEventListener("click",(function(e){e.preventDefault(),c.classList.contains("no-change")?(a.appendChild(s[0]),o.appendChild(s[1]),c.classList.remove("no-change"),c.classList.add("change"),p(),t.onchange=p,t.oninput=h,l.oninput=h,u.oninput=h,l.focus(),l.value="",u.value=""):(o.appendChild(s[0]),a.appendChild(s[1]),c.classList.add("no-change"),c.classList.remove("change"),m(),t.onchange=m,t.oninput=_,u.oninput=_,u.focus(),u.value="",l.value="")}))}()})(),document.querySelector(".exchange__last-update"),document.querySelector(".exchange__timer-seconds"),document.querySelector(".exchange__rates"),t(),e(),setInterval((()=>{t(),e()}),6e4)}();